<div>
    <div ng-if="(isCanvasBlank() && showVideo)" class="noCamBar stripe">
        <span class="animateCamBar">{{'ALLOW_CAMERA' | translate}}</span>
    </div>


    <div class="aligner" ng-show="showStart" ng-if="mode !== 'save'">

        <div class="bigPlay">
            <div>
                <a class="playButton" ng-click="startFun();">{{'GOTO_CARNIVAL' | translate}}</a>
                <br/>
                <a class="playButton" ng-click="startFun();">{{'CARNIVALIZE_YOURSELF' | translate}}</a>
                <br/>
                <a class="playButton" href="/editor">{{'CREATE_MASK' | translate}}</a>
            </div>
        </div>

    </div>


    <div class="aligner">


<!-- VIDEO STATUS MESSAGES *************************** -->
        <div class="messages" ng-show="cameraMsg.msg">
            <i class="icon {{cameraMsg.icon}}"></i>
            <p ng-bind-html="cameraMsg.msg"></p>
        </div>


        <div class="videoBlock" ng-show="(!isCanvasBlank() && showVideo)">
            

<!-- SEARCH MASK *************************** -->
            <div class="findMasks" ng-show="searchMask">
                <div class="cover"></div>
                <div class="input">
                    <input placeholder="{{'SEARCH_MASK_BY_TAG' | translate}}" ng-model="searchTags" type="text"/>
                    <br/>
                    <a ng-click="searchMask = !searchMask">{{'OK_DONE' | translate}}</a>
                </div>
            </div>




<!-- CHANGE MASK *************************** -->
            <div class="changeMask" ng-show="isRunning && mode !== 'save' && masks.length > 1">
                <div class="roundBtn left" ng-click="changeMask(1);"></div>
                <div class="roundBtn right" ng-click="changeMask(-1);"></div>
            </div>



<!-- CONTROLS (buttons) *************************** -->
            <div class="controls" ng-show="showControls">
                <!-- <div class="control calibrate" ng-click="refreshTracking();" ng-show="isRunning"></div> -->
                <div class="control mask" ng-click="searchMask = !searchMask" ng-show="!searchMask && isRunning && (mode !== 'save') && cameraMsg.msg === ''"></div>
                <div class="control image" ng-click="canvasToImage();" ng-show="isRunning && showImage"></div>
                <div class="control empty" ng-hide="isRunning && showImage"></div>
                <div class="videoProgress">
                    <div class="progress" style="width: {{GIFprogress}}">
                        <div class="framesCounter" ng-if="pics>0">
                            <span ng-if="pics>=2" ng-click="resetVideo();">
                                reset 
                            </span>
                            {{pics}}/10
                        </div>
                    </div>
                </div>
                <div class="control video" ng-class="{active: pics>0}" ng-click="canvasToGif();"    ng-show="isRunning"></div>
                <div class="control pause" ng-click="stopTracking();"   ng-show="isRunning"></div>
                <div class="control play" ng-click="restartTracking();" ng-hide="isRunning"></div>
                <!-- <div class="control loading"><span class="spinning"></span></div> -->
            </div>




<!-- fullPic (video canvas + overlay) *************************** -->
            <div id="fullPic" width="640" height="460">
                <video-canvas></video-canvas>
                <overlay-face ng-if="showMask"></overlay-face>
                <video-html5></video-html5>
            </div>

        </div>

    </div>




<!-- find mask and re-calibrate buttons *************************** -->
    <div class="aligner" ng-show="(!isCanvasBlank() && showVideo)">
        <div class="credits minimenu"> 
            <a ng-click="searchMask = !searchMask" ng-show="isRunning && (mode !== 'save') && cameraMsg.msg === ''"> {{'FIND_MASKS' | translate}} </a>
            <div class="right">
                <a ng-click="refreshTracking();">{{'RECALIBRATE_FACE_DETECT' | translate}}</a>
            </div>
        </div>
    </div>




<!-- credits *************************** -->
    <div class="aligner" ng-if="selectedMask.credits.length">
        <div class="credits"> 
            CREDITS <span ng-bind-html="selectedMask.credits | linky"></span>
        </div>
    </div>







<!-- SAVE MASK! *************************** -->
    <div class="aligner" ng-if="mode === 'save'">
        <div class="formMask">

            <div class="el center">
                <div class="radio">
                    <input id="safe" type="radio" ng-model="selectedMask.audience" ng-click="saveMaskOnDB(selectedMask);" name="gender" value="1">
                    <label class="xxxA" for="safe">{{'SAFE' | translate}}</label>
                    <input id="rude" type="radio"  ng-model="selectedMask.audience" ng-click="saveMaskOnDB(selectedMask);" name="gender" value="2">
                    <label class="xxxB" for="rude">{{'RUDE' | translate}}</label>
                    <input id="nokids" type="radio"  ng-model="selectedMask.audience" ng-click="saveMaskOnDB(selectedMask);" name="gender" value="3">
                    <label class="xxxC" for="nokids">{{'ADULT' | translate}}</label>
                    <input id="hardcore" type="radio" ng-model="selectedMask.audience" ng-click="saveMaskOnDB(selectedMask);" name="gender" value="4">
                    <label class="xxxD" for="hardcore">{{'XXX' | translate}}</label>     
                </div>
            </div>

            <div ng-show="selectedMask.audience">
                <div class="el center">
                    <input maxlength="100"  type="text" ng-model="selectedMask.tags" ng-list placeholder="{{'PLACEHOLDER_TAGS' | translate}}">
                </div>
                <div class="el center">
                    <input maxlength="100"  type="text" ng-model="selectedMask.credits" placeholder="{{'PLACEHOLDER_CREDITS' | translate}}">
                </div>
                <div class="el center">
                    <div class="wrap">
                        <input maxlength="80" type="email" ng-model="selectedMask.email" placeholder="{{'PLACEHOLDER_MAIL' | translate}}">
                    </div>
                </div>
                <div class="el center">
                    <a class="btn" ng-click="saveMaskOnDB(selectedMask);">{{'SAVE_MASK' | translate}}</a>
                </div>
                <div class="el center">
                    <span ng-click="goTo('/editor');">{{'MODIFY_MASK' | translate}}</span>
                </div>
            </div>
                
            <div ng-hide="selectedMask.audience" class="el center">
                <a class="btn" ng-click="goTo('/editor');">{{'MODIFY_MASK' | translate}}</a>  
            </div>
        </div>
    </div>




<!-- create MASK button *************************** -->
    <div class="aligner" ng-show="mode !== 'save'">
        <div class="formMask">
            <div class="el center">
                <a class="btn" ng-click="goTo('/editor');">{{'CREATE_MASK' | translate}}</a>
            </div>
        </div>
    </div>
    


<!-- clear storage (DEBUG) button *************************** -->
    <div class="aligner" ng-if="mode !== 'save'">
        <a ng-click="clearStorage();">clearStorage</a>
    </div>

<!--
    <pre style="max-width: 640px;overflow: scroll;font-size: 12px;background: #f1f1f1;word-wrap: break-word; max-height:600px;font-family:monospace;letter-spacing: 1px;">
        {{selectedMask}}
    </pre>
-->





<!-- previously taken PHOTOS *************************** -->
    <div class="aligner" ng-if="images.length > 0">
        <ul class="userImages">
            <li ng-repeat="img in images | orderBy:'ts':true"> <!-- | orderBy:'ts':true -->
                <personal-image></personal-image>
            </li>
        <ul>
    </div>

</div>